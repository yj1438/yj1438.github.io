---
layout: post
title: AMP ï¼ˆAccelerated Mobile Pagesï¼‰
---

# AMP

## ä»€ä¹ˆæ˜¯ AMP

>####**å¼•è¨€ï¼š**
>
>å¯¹è®¸å¤šäººæ¥è¯´ï¼Œåœ¨æ‰‹æœºä¸Šçœ‹é¡µé¢ï¼ˆwebviewï¼‰æ˜¯ä¸€ä¸ªå¾ˆæ…¢çš„ã€ä¸é è°±çš„ç»å†ï¼Œä½†å®ƒä¸åº”è¯¥æ˜¯è¿™æ ·çš„ã€‚åŠ é€Ÿç§»åŠ¨ç«¯é¡µé¢ï¼ˆAMPï¼‰é¡¹ç›®æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå®ƒå¯¹ç§»åŠ¨ç«¯çš„é¡µé¢è¿›è¡Œäº†å¤§å¹…çš„ä¼˜åŒ–ï¼Œå¼€å‘äººå‘˜å¯ä»¥å€ŸåŠ©å®ƒæ¥æ„é€ ç½‘é¡µã€‚ä¸€æ—¦æ‹¥æœ‰ï¼Œç¬é—´åŠ è½½---æ— å¤„ä¸åœ¨ã€‚

[AMP](https://www.ampproject.org/) ï¼ˆAccelerated Mobile Pages ï¼‰æ˜¯è°·æ­Œæ¨åŠ¨çš„ä¸€é¡¹ä¸“é—¨é’ˆå¯¹ç§»åŠ¨ç«¯ç½‘é¡µåŠ é€Ÿçš„é¡¹ç›®ã€‚æ ¹æ®å®˜æ–¹çš„æµ‹è¯•æŠ¥å‘Šï¼Œä½¿ç”¨çš„ AMP æŠ€æœ¯çš„é¡µé¢åœ¨ 3G æƒ…å†µä¸‹ï¼Œ**é¦–å±æ˜¾ç¤ºæ—¶é—´**ä¼šæœ‰ 15% ~ 85% çš„æ€§èƒ½æå‡ã€‚

## AMP å·¥ä½œåŸç†

AMP ä¸»è¦ç”±ä¸‰éƒ¨åˆ†æ„æˆï¼ŒAMP HTMLã€AMP Runtimeã€AMP Components

### AMP HTML

AMP å¯¹åº”ç”¨æ­¤æŠ€æœ¯çš„é¡µé¢ DOM åšå‡ºä¸€äº›è§„å®š
##### é¡µé¢å¿…éœ€çš„è§„èŒƒ

- doctype å¿…é¡»æ˜¯ `<!doctype html>`
- é¡¶å±‚ html æ ‡ç­¾å¿…é¡»åŒ…å« AMP å±æ€§ï¼š `<html âš¡>` (`<html amp>` ä¹Ÿå¯ä»¥)
- åŒ…å« `<head>` å’Œ `<body>` æ ‡ç­¾
- åœ¨ head ä¸­åŒ…å«ä¸€ä¸ª `<link rel="canonical" href="$SOME_URL" />` æ ‡ç­¾ï¼Œè¿™ä¸ªæ ‡ç­¾æŒ‡å‡ºè¯¥é¡µé¢æ™®é€šç‰ˆæœ¬çš„ URLï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªç‰ˆæœ¬ï¼Œä½¿ç”¨å½“å‰çš„ URL å°±å¯ä»¥ã€‚ï¼ˆå‘Šè¯‰æœç´¢å¼•æ“ï¼Œè¿™æ˜¯åŒä¸€ä¸ªé¡µé¢çš„ä¸åŒç‰ˆæœ¬ï¼Œå¦åˆ™æœç´¢å¼•æ“ä¼šè®¤ä¸ºæ­¤é¡µé¢æœ‰ä¸¤ä¸ª URLï¼Œä¼šè®¤ä¸ºæ˜¯ä½œå¼Šï¼‰
- å¿…é¡»å°† `<meta charset="utf-8">` æ”¾ç½®åœ¨ HEAD çš„æœ€ä¸Šé¢
- HEAD ä¸­å¿…é¡»åŒ…å« `<meta name="viewport" content="width=device-width,minimum-scale=1">`ï¼Œä¹Ÿå¯ä»¥åœ¨é‡Œæ·»å…¥`initial-scale=1` (1)
- åœ¨ HEAD ä¸­å¼•å…¥ AMP æ ¸å¿ƒ JS æ–‡ä»¶ ï¼š`<script async src="https://cdn.ampproject.org/v0.js"></script>`
- åœ¨ HEAD ä¸­å†™å…¥ä»¥ä¸‹ä»£ç  <br>`<style>body {opacity: 0}</style><noscript><style>body {opacity: 1}</style></noscript>`

(1) `width=device-width,minimum-scale=1` éœ€è¦æ‰“å¼€[GPU rasterization](https://www.chromium.org/developers/design-documents/chromium-graphics/how-to-get-gpu-rasterization)

##### DOM å…ƒç´ è§„èŒƒ

| åŸç”Ÿæ ‡ç­¾       |  AMP HTML ä¸­çš„æ ‡ç­¾                          |
|-----------|------------------------------------------------|
| script    | é™¤äº†ç±»å‹æ˜¯`application/ld+json`çš„ script æ ‡ç­¾éƒ½è¢«å»ºè®®ç¦æ­¢ä½¿ç”¨ã€‚å½“ç„¶ï¼ŒAMP Runtime å’Œ AMP æ‰©å±•ç»„ä»¶æ‰€éœ€è¦çš„ JS è¿˜æ˜¯éœ€è¦åŠ è½½çš„|
| base      | ç¦æ­¢ |
| img       | amp-img |
| video     | amp-video |
| audio     | amp-audio |
| iframe    | amp-iframe |
| frame     | ç¦æ­¢ |
| frameset  | ç¦æ­¢ |
| object    | ç¦æ­¢ |
| param     | ç¦æ­¢ |
| applet    | ç¦æ­¢ |
| embed     | ç¦æ­¢ |
| form      | ç¦æ­¢ |
| input elements | ç¦æ­¢ã€‚ `type="button"` çš„å¯ä»¥è¢«ä½¿ç”¨ |
| button    | å…è®¸ |
| style     | [Required style tags for adjusting opacity](#opacity) One additional style tag is allowed in head tag for the purpose of custom styling. This style tag must have the attribute `amp-custom`. [ğŸ”—](#cust) |
| link      | Allowed for certain values of rel: `canonical`. `stylesheet` is generally disallowed, but some values may be whitelisted for font providers. |
| meta      | The `http-equiv` attribute is banned. Otherwise allowed. |
| a         | The `href` attribute value must not begin with `javascript:`. If set, the `target` attribute value must be `_blank`. Otherwise allowed. [ğŸ”—](#ancr) |
| svg       | Most SVG elements are allowed |

### AMP Runtime

åœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šï¼ŒAMP Runtimeï¼ˆå°±æ˜¯ HEAD ä¸­æœ€çš„å¼•å…¥çš„é‚£ä¸ª JSï¼‰è´Ÿè´£åè°ƒå„ä¸ª DOM ä¸èµ„æºçš„åŠ è½½æ—¶æœºä¸ä¼˜å…ˆçº§ï¼Œä»¥åŠæä¾›éªŒè¯å™¨ç­‰è°ƒè¯•åŠŸèƒ½ã€‚

å¦‚æœä½ ä¸çŸ¥é“ä½ çš„é¡µé¢æ˜¯å¦ç¬¦åˆ AMP çš„è§„èŒƒï¼Œä½ å¯ä»¥åœ¨è®¿é—®çš„ URL ä¸­åŠ å…¥ #development=1 æ¥æ‰“å¼€å¼€å‘è€…æ¨¡å¼ã€‚è¿™æ—¶ AMP ä¼šåŠ è½½éªŒè¯å™¨ï¼Œæ£€æµ‹é¡µé¢ï¼Œå¹¶åœ¨æ§åˆ¶å°æ˜¾ç¤ºä¸ç¬¦åˆ AMP è§„èŒƒçš„ä½ç½®ä¿¡æ¯

### AMP Components

AMP é€šè¿‡è‡ªå®šä¹‰å…ƒç´ æä¾›äº†ä¸€äº›ç»„ä»¶ï¼Œåˆ†ä¸ºä¸¤ç±»ï¼š**å†…ç½®ç»„ä»¶**ä¸**æ‰©å±•ç»„ä»¶**

ç”¨æ¥æ›¿æ¢ `<img>` ã€`<video>` ç­‰æ ‡ç­¾ï¼Œä»é¡µä¼˜åŒ–å¯¹èµ„æºçš„åŠ è½½ç­–ç•¥ï¼Œ





