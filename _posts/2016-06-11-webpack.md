---
layout: post
title: webpack 开发环境/生产环境打包配置
---

# 完整的 webpack 开发环境与生产环境打包配置

webpack 这一打包神器想必大家早已使用了，不过那差劲的官方文档真是搞晕不少入门者。  
在这里，分享一套完整的 WEBPACK 打包配置，笔者已经在实际项目中使用了一年多，没有什么问题。  
希望对大家有所帮助。

直接看项目吧

[https://github.com/yj1438/webpack-demo](https://github.com/yj1438/webpack-demo)

## 基本打包功能

* eslint 校验；
* 使用 `ExtractTextPlugin` 将 js 和 css 分离，保证打包文件的整洁，最终会生成 `/app.js` 和 `/app.css`两个文件，文件名按自己情况随意改；
* 默认支持 LESS ，其它的如 SASS 自己可以改；
* 资源文件压缩 （废话～）；
* 小于 8KB 的图片会以 base64 打进 CSS 中，其它按 `[name].[ext]` 的文件名进行输出；
* 图片压缩，但非常耗时，默认没有开启`!img-loader?minimize`；
* 支持最新的 ES6/7 + reactjs 语法，支持 mobx 注解。

## 开发环境

* webpack-dev-server 支持 liveload 即写即生效，每次打包只用 300ms；
* `npm run server` 直接启动，换项目时手动改入口文件吧，感觉不方便的话可以像生产环境一样自己定义参数区分入口文件。

## 生产环境

* 对公共模块的分离采用 `CommonsChunkPlugin` 和 `DllReferencePlugin` 两种方案（推荐 DllReferencePlugin）；
* 简单的脚本封装：`node wpbuild.js --<preject dir name> (--watch)`；

> 项目中有现成的一个 demo，直接试用。

